---

---

<div class="user-profile" id="userProfile">
    <div class="avatar" id="userAvatar">??</div>
    <span id="userNameDisplay">Usuario</span>
    <div class="profile-dropdown" id="profileDropdown">
        <div class="dropdown-header" id="greetingHeader">
            Detalles de Usuario
        </div>
        <div class="dropdown-item">
            <strong>ID:</strong>
            <span id="displayId">-</span>
        </div>
        <div class="dropdown-item">
            <strong>Nombre:</strong>
            <span id="displayName">-</span>
        </div>
    </div>
</div>

<script>
    // Auth & Profile Logic
    const userId = localStorage.getItem("user_id");
    const userName = localStorage.getItem("user_name");
    const userLogin = localStorage.getItem("user_login");
    const userPaterno = localStorage.getItem("user_paterno");
    const userMaterno = localStorage.getItem("user_materno");

    const nameDisplay = document.getElementById("userNameDisplay");
    const avatarDisplay = document.getElementById("userAvatar");
    const profileContainer = document.getElementById("userProfile");
    const dropdown = document.getElementById("profileDropdown");

    const displayId = document.getElementById("displayId");
    const displayNameField = document.getElementById("displayName");
    const greetingHeader = document.getElementById("greetingHeader");

    // Dynamic Greeting
    const hour = new Date().getHours();
    let greeting = "Buenos dÃ­as";
    if (hour >= 12 && hour < 19) greeting = "Buenas tardes";
    if (hour >= 19 || hour < 6) greeting = "Buenas noches";

    if (greetingHeader) {
        greetingHeader.textContent = `${greeting} @${userLogin || "usuario"}`;
    }

    if (nameDisplay && userName) nameDisplay.textContent = userName;
    if (avatarDisplay && userName)
        avatarDisplay.textContent = userName.substring(0, 2).toUpperCase();

    if (displayId) displayId.textContent = userId || "-";
    if (displayNameField)
        displayNameField.textContent =
            `${userName || ""} ${userPaterno || ""} ${userMaterno || ""}`.trim() ||
            "-";

    // Toggle Dropdown
    profileContainer?.addEventListener("click", (e) => {
        e.stopPropagation();
        dropdown?.classList.toggle("active");
    });

    window.addEventListener("click", () => {
        dropdown?.classList.remove("active");
    });
</script>
